<metal:main
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    use-macro="load: layout.html">
    <tal:block metal:fill-slot="header">
        <title><tal:block replace="page.title" /> - <tal:block replace="page.acct.uid" /> - hypertextual</title>
    </tal:block>
    <tal:block metal:fill-slot="content">
        <div>
            <span class="page-title" tal:content="page.title">title</span>
            <tal:block condition="page.curr_rev_num==rev_num and g.current_user and g.current_user.uid==page.acct.uid">
                <!-- edit link -->
                - <a tal:attributes="href '%s?action=edit' % page.get_url()">Edit</a>
            </tal:block>
            <tal:block condition="page.curr_rev_num!=rev_num">
                <!-- link to latest revision -->
                - <a tal:attributes="href page.get_url()">Go to latest revision</a>
            </tal:block>
        </div>
        <div>
            <tal:block replace="structure page_html"></tal:block>
        </div>
        <hr class="margin-above" />
        <div class="page-footer">
            Revision: <tal:block content="rev_num if rev_num is not None else 'Draft only'"></tal:block>
        </div>
    </tal:block>
</metal:main>
