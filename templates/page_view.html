<metal:main
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    use-macro="load: layout.html">
    <tal:block metal:fill-slot="header">
        <title><tal:block replace="page.title" /> - <tal:block replace="page.acct.uid" /> - hypertextual</title>
    </tal:block>
    <tal:block metal:fill-slot="content">
        <div>
            <span class="page-title" tal:content="page.title">title</span> -
            <a tal:condition="page.curr_rev_num==rev" tal:attributes="href '%s?action=edit' % page.get_url()">Edit</a>
            <a tal:condition="page.curr_rev_num!=rev" tal:attributes="href page.get_url()">Go to latest revision</a>
        </div>
        <div>
            <tal:block replace="structure page.get_html_for_rev(session, current_user, rev)"></tal:block>
        </div>
        <hr>
        <div class="page-footer">
            Latest revision: <tal:block content="page.curr_rev_num"></tal:block>
        </div>
    </tal:block>
</metal:main>
